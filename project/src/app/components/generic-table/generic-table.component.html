<div
  class="container"
  [ngClass]="{
    'white-color': isDarkModeActive,
    TableWidth: isTable,
    TableWidth100: graphName == 'Vaccination'
  }"
>


  <div class="table" [ngClass]="{ 'background-dark-mode': isDarkModeActive }">
    <div class="little-container">
      <div
        [ngClass]="{
          'i-icon-dark': isDarkModeActive,
          'i-icon': !isDarkModeActive
        }"
      ></div>

      <span class="title">{{ title }}</span>





      <!--new component select-box-container  -->
      <div
        *ngIf="!isTable && this.graphName.length > 0"
        class="select-box-container"
        (click)="toggleDropdown()"
      >

      <app-select-box [selectedOption]="selectedOption" [dropdownVisible]="dropdownVisible" [graphName]="graphName" [isDarkModeActive]="isDarkModeActive"></app-select-box>

        <!-- <button class="selected-option" [ngClass]="{'selected-option-darkMode':isDarkModeActive}">
          <div
            [ngClass]="{ rotate: dropdownVisible,'half-rectangle-dark':isDarkModeActive}"
            class="half-rectangle"

          ></div>
          {{ selectedOption }}
        </button> -->







<app-my-options [dropdownVisible]="dropdownVisible" [isDarkModeActive]="isDarkModeActive" [options]="options"></app-my-options>


      </div>

    </div>


<app-ellipsis-icon [isDarkModeActive]="isDarkModeActive" (click)="isActiveShareAndDownload = !isActiveShareAndDownload"></app-ellipsis-icon>


    <div
      [class]="isDarkModeActive?'share-and-download-dark':'share-and-download'"
      [ngClass]="{ active: isActiveShareAndDownload }"
    ></div>




    <div class="graph-header">

      <app-clarification *ngIf="graphName == 'main1'" [className]="'pic-graph'" [ngClassObJ]="{ 'pic-graph-dark': this.isDarkModeActive }"  [isDarkModeActive]="isDarkModeActive"></app-clarification>


<app-variable-graph-label [items]="items" [graphName]="graphName"></app-variable-graph-label>



      <div
        *ngIf="this.graphName == 'main' || this.graphName == 'main1'"
        class="date"
      >
        תאריך
      </div>

    <div [class]="this.ClassTextAboveGraph">
    {{textAboveGraph}}
      </div>

    </div>

    <div
      class="align-graph"

    >



      <div *ngIf="isTable">
        <div [class]="graphName=='lights'?'select-box-container-table1':'select-box-container'" (click)="toggleDropdown()">





<app-select-box [selectedOption]="selectedOption2" [dropdownVisible]="dropdownVisible" [graphName]="graphName" [isDarkModeActive]="isDarkModeActive"></app-select-box>
          <!-- <button class="selected-option " [ngClass]="{'selected-option-table':graphName=='Vaccination','flex-and-center':graphName=='lights','selected-option-darkMode':isDarkModeActive}">
            {{ selectedOption2 }}
            <div
            class="center-half-rectangle"
              [ngClass]="{ rotate: dropdownVisible,'center-half-rectangle-dark':isDarkModeActive }"
            ></div>
          </button> -->






          <ul *ngIf="dropdownVisible" [ngClass]="{'options-list-for-table1':graphName=='Vaccination','options-list-for-table2':graphName!='Vaccination'}"  >
            <div class="search-input">
              <div  class="x-input" [ngClass]="{'x-input-dark':isDarkModeActive}" *ngIf="this.searchText.length>0" (click)="this.searchText=''" ></div>
              <input
                class="input"
                type="text"
                [ngClass]="{'deep-blue-option': isDarkModeActive}"

                placeholder="חיפוש לפי ישוב"
                [(ngModel)]="searchText"
                (input)="onInput()"
                (click)="onInputClick($event)"
              />
              <div class="search-results" *ngIf="showResults">
                <ul>
                  <li
                    *ngFor="let item of this.filteredData"
                    (click)="onResultClick(item,$event)"
                  >
                    {{ graphName=='lights'?item.address:item.id }}
                  </li>
                </ul>
              </div>
            </div>

            <button  [ngClass]="{'deep-blue-btn': isDarkModeActive}" class="btnSelect" (click)="confirmSelectTable('ok')">אישור</button>
            <button [ngClass]="{'deep-blue-btn': isDarkModeActive}" class="btnSelect" (click)="confirmSelectTable('no')">ביטול</button>
          </ul>
        </div>



      </div>



      <div
        *ngIf="!isTable"
        id="{{ this.graphName }}"
        [style]="this.graphSize"
      ></div>
    </div>

    <div *ngIf="isTable" class="container-color">

<app-clarification *ngIf="graphName == 'lights'"  [className]="'pic-graph-light'" [isDarkModeActive]="isDarkModeActive"></app-clarification>
<app-color-squares class="little-container-text-and-color" *ngIf="this.graphName == 'lights'" [colors]="colors"></app-color-squares>
    </div>
<div class="row header">
    <app-table-header *ngIf="isTable && this.graphName === 'lights'" [graphName]="'lights'" [isDarkModeActive]="isDarkModeActive"></app-table-header>
    <app-table-header *ngIf="isTable && this.graphName === 'Vaccination'" [graphName]="'Vaccination'" [isDarkModeActive]="isDarkModeActive"></app-table-header>
</div>

 <app-table-body  *ngIf="isTable && this.graphName === 'lights'" [isTable]="isTable"  [tablesData]="tablesData" [isDarkModeActive]="isDarkModeActive"  [graphName]="'lights'"></app-table-body>

 <app-table-body  *ngIf="isTable && this.graphName === 'Vaccination'" [isTable]="isTable" [tablesData]="tablesData" [isDarkModeActive]="isDarkModeActive" [graphName]="'Vaccination'"></app-table-body>

  </div>
</div>
